# config.json

{}

# main.py

"""
PONTO DE ENTRADA PRINCIPAL - Lunar Spoofer
"""
import sys
import os
import ctypes
import traceback

def check_admin_privileges():
    """Verifica se est√° executando como administrador"""
    try:
        return ctypes.windll.shell32.IsUserAnAdmin()
    except:
        return False

def setup_environment():
    """Configura o ambiente Python"""
    # Adicionar src ao path
    src_path = os.path.join(os.path.dirname(__file__), 'src')
    if src_path not in sys.path:
        sys.path.insert(0, src_path)

def main():
    """Fun√ß√£o principal"""
    print("Inicializando Lunar Spoofer...")

    # Configurar ambiente
    setup_environment()

    # Verificar privil√©gios
    if not check_admin_privileges():
        print("ERRO: Execute como Administrador!")
        input("Pressione Enter para sair...")
        return 1

    try:
        from src.core.app import LunarApp

        # Criar e executar aplica√ß√£o
        app = LunarApp()
        return app.run()

    except Exception as e:
        print(f"Erro fatal na inicializa√ß√£o: {e}")
        print(f"Traceback: {traceback.format_exc()}")
        input("Pressione Enter para sair...")
        return 1

if __name__ == "__main__":
    exit_code = main()
    sys.exit(exit_code)


# README.md

# Documentation

TODO


# run_pyside.py

# TODO: Implement


# script.py

import os
import pathlib

def export_project_structure(root_dir, output_file):
    # Lista de extens√µes de arquivos de c√≥digo (personaliz√°vel)
    code_extensions = {
        '.py', '.js', '.html', '.css', '.java', '.c', '.cpp', '.cs', '.php', '.rb',
        '.go', '.rs', '.ts', '.sql', '.json', '.xml', '.yaml', '.yml', '.md', '.cfg',
        '.conf', '.ini', '.sh', '.bat', '.ps1', '.vue', '.jsx',
        '.tsx', '.scss', '.sass', '.less', '.asm', '.swift', '.kt', '.dart'
    }
    
    with open(output_file, 'w', encoding='utf-8') as outfile:
        for root, dirs, files in os.walk(root_dir):
            # Ignorar pastas de vers√£o (personaliz√°vel)
            ignore_dirs = {'.git', '__pycache__', 'node_modules', 'vendor', 'dist', 'build'}
            dirs[:] = [d for d in dirs if d not in ignore_dirs]
            
            for file in files:
                file_path = pathlib.Path(root) / file
                relative_path = file_path.relative_to(root_dir)
                
                # Verificar se √© um arquivo de c√≥digo
                if file_path.suffix.lower() in code_extensions:
                    try:
                        with open(file_path, 'r', encoding='utf-8') as infile:
                            content = infile.read()
                    except UnicodeDecodeError:
                        try:
                            with open(file_path, 'r', encoding='latin-1') as infile:
                                content = infile.read()
                        except Exception:
                            content = f"[ERRO: N√£o foi poss√≠vel ler o arquivo {relative_path}]\n"
                    except Exception as e:
                        content = f"[ERRO: {str(e)}]\n"

                    # Escrever no arquivo de sa√≠da
                    outfile.write(f"# {relative_path}\n\n")
                    outfile.write(content)
                    outfile.write("\n\n")

if __name__ == "__main__":
    project_root = input("Digite o caminho completo do projeto (ou Enter para usar o diret√≥rio atual): ").strip()
    if not project_root:
        project_root = os.getcwd()
    
    output_filename = "projeto_completo.txt"
    export_project_structure(project_root, output_filename)
    print(f"Arquivo '{output_filename}' gerado com sucesso!")

# docs\migration_guide.md

# Documentation

TODO


# docs\ui_specs.md

# Documentation

TODO


# src\auth\auth_system_firebase.py

# TODO: Implement


# src\auth\license_generator.py

# TODO: Implement


# src\auth\login_handler.py

# TODO: Implement


# src\cleaners\system_cleaner.py

class SystemCleaner:
    def __init__(self):
        pass


# src\cleaners\system_paths.py

# TODO: Implement


# src\controllers\spoofer_controller.py

class SpoofingController:
    def __init__(self, cleaner, mac_spoofer, hwid_spoofer, guid_spoofer, hw_reader):
        self.cleaner = cleaner
        self.mac_spoofer = mac_spoofer
        self.hwid_spoofer = hwid_spoofer
        self.guid_spoofer = guid_spoofer
        self.hw_reader = hw_reader


# src\core\app.py

import sys
import os
from PySide6.QtWidgets import QApplication, QMessageBox
from PySide6.QtCore import QTimer
from PySide6.QtGui import QIcon

class LunarApp:
    def __init__(self):
        # Criar QApplication PRIMEIRO
        self.qt_app = QApplication(sys.argv)
        self.main_window = None

        # Configura√ß√£o b√°sica
        self.setup_application()

    def setup_application(self):
        """Configura√ß√µes iniciais seguras"""
        self.qt_app.setApplicationName("Lunar Spoofer")
        self.qt_app.setApplicationVersion("1.0.0")

        # Tentar carregar √≠cone, mas n√£o cr√≠tico
        try:
            icon_path = "assets/icons/app.ico"
            if os.path.exists(icon_path):
                self.qt_app.setWindowIcon(QIcon(icon_path))
        except:
            pass  # √çcone n√£o √© cr√≠tico

    def initialize_components(self):
        """Inicializa√ß√£o segura dos componentes"""
        try:
            # Importar aqui para evitar depend√™ncias circulares
            from src.ui.main_window import MainWindow

            # Inicializar controladores b√°sicos (simplificado por enquanto)
            spoofer_controller = self.create_dummy_controller()

            # Criar janela principal
            self.main_window = MainWindow(spoofer_controller)
            return True

        except Exception as e:
            print(f"Erro cr√≠tico na inicializa√ß√£o: {e}")
            self.show_error_message(str(e))
            return False

    def create_dummy_controller(self):
        """Cria controlador tempor√°rio para testes"""
        class DummyController:
            def __init__(self):
                self.status = "Ready"

        return DummyController()

    def show_error_message(self, error_details):
        """Mostra mensagem de erro amig√°vel"""
        msg = QMessageBox()
        msg.setIcon(QMessageBox.Critical)
        msg.setWindowTitle("Erro de Inicializa√ß√£o")
        msg.setText("N√£o foi poss√≠vel iniciar o Lunar Spoofer")
        msg.setInformativeText(f"Detalhes: {error_details}")
        msg.setDetailedText(f"Traceback completo:\n{error_details}")
        msg.exec()

    def run(self):
        """Executa a aplica√ß√£o de forma segura"""
        print("Iniciando Lunar Spoofer...")

        try:
            if self.initialize_components():
                self.main_window.show()
                print("Aplica√ß√£o iniciada com sucesso")
                return self.qt_app.exec()
            else:
                print("Falha na inicializa√ß√£o")
                return 1

        except Exception as e:
            print(f"Erro fatal: {e}")
            self.show_error_message(str(e))
            return 1


# src\core\config.py

import json
import os
from pathlib import Path

class Config:
    def __init__(self):
        self.config_path = Path("config.json")
        self.default_config = {
            "theme": "purple",
            "window_size": [1400, 900],
            "auto_start": False,
            "admin_required": True,
            "log_level": "INFO"
        }
        self.config = self.load_config()

    def load_config(self):
        """Carrega configura√ß√£o do arquivo ou cria padr√£o"""
        if self.config_path.exists():
            try:
                with open(self.config_path, 'r', encoding='utf-8') as f:
                    return {**self.default_config, **json.load(f)}
            except Exception as e:
                print(f"Erro ao carregar config: {e}")
                return self.default_config
        else:
            self.save_config(self.default_config)
            return self.default_config

    def save_config(self, config=None):
        """Salva configura√ß√£o no arquivo"""
        if config is None:
            config = self.config

        try:
            with open(self.config_path, 'w', encoding='utf-8') as f:
                json.dump(config, f, indent=4, ensure_ascii=False)
            return True
        except Exception as e:
            print(f"Erro ao salvar config: {e}")
            return False

    def get(self, key, default=None):
        """Obt√©m valor da configura√ß√£o"""
        return self.config.get(key, default)

    def set(self, key, value):
        """Define valor da configura√ß√£o"""
        self.config[key] = value
        return self.save_config()


# src\spoofers\guid_spoofer\guid_paths.py

# TODO: Implement


# src\spoofers\guid_spoofer\guid_spoofer.py

# TODO: Implement


# src\spoofers\hwid_spoofer\hwid_paths.py

# TODO: Implement


# src\spoofers\hwid_spoofer\hwid_spoofer.py

# TODO: Implement


# src\spoofers\mac_spoofer\mac_paths.py

# TODO: Implement


# src\spoofers\mac_spoofer\mac_spoofer.py

# TODO: Implement


# src\spoofers\mac_spoofer\network_utils.py

# TODO: Implement


# src\ui\login_window.py

# TODO: Implement


# src\ui\main_window.py

from PySide6.QtWidgets import (QMainWindow, QWidget, QVBoxLayout,
                              QHBoxLayout, QStatusBar, QMessageBox, QLabel, QFrame,
                              QPushButton)
from PySide6.QtCore import Qt, QTimer
from PySide6.QtGui import QFont, QPalette, QColor, QIcon, QPixmap
import os

from src.ui.components.sidebar import Sidebar
from src.ui.components.dashboard import Dashboard
from src.ui.components.particles import ParticleSystem
# from src.ui.components.header_bar import HeaderBar # REMOVED
import traceback

class MainWindow(QMainWindow):
    def __init__(self, spoofer_controller):
        super().__init__()
        self.controller = spoofer_controller
        self.current_page = "dashboard"

        self.setup_window()
        QTimer.singleShot(100, self.initialize_ui)

    def setup_window(self):
        """Configura√ß√£o da janela principal"""
        self.setWindowTitle("Lunar Spoofer - Advanced System Protection")
        self.setGeometry(100, 100, 1400, 900)
        self.setMinimumSize(1200, 800)

        # Aplicar fundo b√°sico
        self.setStyleSheet("QMainWindow { background-color: #1a1a1a; }")
        
        self.center_on_screen()

    def center_on_screen(self):
        """Centraliza a janela"""
        screen = self.screen().availableGeometry()
        window_size = self.frameGeometry()
        self.move(
            (screen.width() - window_size.width()) // 2,
            (screen.height() - window_size.height()) // 2
        )

    def initialize_ui(self):
        """Inicializa a UI com part√≠culas"""
        try:
            self.setup_ui()
            self.load_stylesheet()
            print("Interface Lunar com part√≠culas carregada")

            # Inicializar part√≠culas ap√≥s um pequeno delay
            QTimer.singleShot(100, self.initialize_particles)

        except Exception as e:
            print(f"Erro na UI: {e}")
            self.setup_fallback_ui()

    def setup_ui(self):
        """Configura a interface completa"""
        # Widget central
        central_widget = QWidget()
        central_widget.setObjectName("centralWidget")
        self.setCentralWidget(central_widget)

        # Layout principal (REMOVIDO PARA PERMITIR SOBREPOSI√á√ÉO)
        # main_layout = QVBoxLayout(central_widget)
        # main_layout.setContentsMargins(0, 0, 0, 0)
        # main_layout.setSpacing(0)

        # Sistema de part√≠culas como overlay transparente - FUNDO
        self.particle_system = ParticleSystem(central_widget)

        # HeaderBar REMOVED

        # √Årea de conte√∫do principal
        self.content_stack = QFrame(central_widget)
        self.content_stack.setObjectName("contentStack")
        content_stack_layout = QVBoxLayout(self.content_stack)
        content_stack_layout.setContentsMargins(0, 0, 0, 0)
        content_stack_layout.setSpacing(0)

        # Dashboard
        self.dashboard = Dashboard(self.controller)
        content_stack_layout.addWidget(self.dashboard)

        # Sidebar (CAMADA SUPERIOR)
        self.sidebar = Sidebar(central_widget)

        # Floating buttons (header buttons moved here)
        self.message_btn = self.create_icon_button("message.png", "Messages")
        self.message_btn.setParent(central_widget)

        self.notification_btn = self.create_icon_button("no_notification.png", "Notifications")
        self.notification_btn.setParent(central_widget)

        self.user_widget = self.create_user_widget()
        self.user_widget.setParent(central_widget)

        # Barra de status
        self.setup_status_bar()

        # Conectar navega√ß√£o
        self.sidebar.navigation_changed.connect(self.on_navigation_changed)

        # Chamar a l√≥gica de posicionamento pela primeira vez
        self.update_geometries()

    def on_navigation_changed(self, page_id):
        """Handler de navega√ß√£o"""
        self.current_page = page_id

        status_messages = {
            "dashboard": "Dashboard - System overview and security controls",
            "tools": "Tools - Advanced system utilities",
            "system_info": "System Info - Hardware and software information",
            "settings": "Settings - Application configuration",
            "support": "Support - Contact and support information"
        }

        self.statusBar().showMessage(status_messages.get(page_id, "System ready"))
        print(f"Navegando para: {page_id}")

    def setup_fallback_ui(self):
        """UI de fallback"""
        central_widget = QWidget()
        self.setCentralWidget(central_widget)

        layout = QVBoxLayout(central_widget)
        error_label = QLabel("System interface compatibility mode")
        error_label.setAlignment(Qt.AlignCenter)
        error_label.setStyleSheet("color: white;")
        layout.addWidget(error_label)

    def setup_status_bar(self):
        """Configura barra de status"""
        status_bar = QStatusBar()
        status_bar.showMessage("Lunar Spoofer initialized - Modern theme active")
        self.setStatusBar(status_bar)

    def resizeEvent(self, event):
        """Gerencia a geometria dos componentes para sobreposi√ß√£o"""
        super().resizeEvent(event)
        self.update_geometries()

    def update_geometries(self):
        """Posiciona os widgets manualmente para permitir sobreposi√ß√£o"""
        w = self.width()
        h = self.height()

        # 1. Part√≠culas (fundo)
        if hasattr(self, 'particle_system'):
            self.particle_system.setGeometry(0, 0, w, h)
            self.particle_system.lower()

        # 2. Content Stack (starts at top now, behind sidebar)
        if hasattr(self, 'content_stack'):
            if hasattr(self, 'sidebar'):
                sidebar_width = self.sidebar.width()
                self.content_stack.setGeometry(
                    sidebar_width,
                    0,  # Starts at Y=0
                    w - sidebar_width,
                    h  # Occupies full height
                )
            else:
                self.content_stack.setGeometry(0, 0, w, h)

        # 4. Sidebar (topo)
        if hasattr(self, 'sidebar'):
            sidebar_width = self.sidebar.width() # Pega a largura fixa (150)
            # A sidebar come√ßa em (0, 0) e ocupa a altura total
            self.sidebar.setGeometry(0, 0, sidebar_width, h)
            self.sidebar.raise_() # Coloca a sidebar no topo

        # 5. Floating buttons (positioned in top-right corner)
        margin = 30
        spacing = 15

        if hasattr(self, 'user_widget'):
            user_width = self.user_widget.width()
            self.user_widget.setGeometry(w - user_width - margin, margin, user_width, 40)
            self.user_widget.raise_()

            if hasattr(self, 'notification_btn'):
                self.notification_btn.setGeometry(w - user_width - margin - 32 - spacing, margin + 4, 32, 32)
                self.notification_btn.raise_()

                if hasattr(self, 'message_btn'):
                    self.message_btn.setGeometry(w - user_width - margin - 32 - spacing - 32 - spacing, margin + 4, 32, 32)
                    self.message_btn.raise_()

    # Methods moved from header_bar.py

    def create_icon_button(self, icon_filename, tooltip):
        btn = QPushButton()
        btn.setObjectName("iconButton")  # CSS will still work
        btn.setFixedSize(32, 32)
        btn.setCursor(Qt.PointingHandCursor)
        btn.setToolTip(tooltip)

        icon_path = os.path.join(os.path.dirname(__file__), '..', '..', 'assets', 'icons', icon_filename)

        if not os.path.exists(icon_path):
           icon_path = os.path.join(os.path.dirname(__file__), '..', 'icons', icon_filename)

        if os.path.exists(icon_path):
            pixmap = QPixmap(icon_path)
            pixmap = pixmap.scaled(24, 24, Qt.KeepAspectRatio, Qt.SmoothTransformation)
            btn.setIcon(QIcon(pixmap))
            btn.setIconSize(pixmap.size())
        else:
            print(f"√çcone n√£o encontrado: {icon_path}")
            btn.setText("üìß" if "message" in icon_filename else "üîî")
        return btn

    def create_user_widget(self):
        widget = QFrame()
        widget.setObjectName("userWidget")  # CSS will still work
        layout = QVBoxLayout(widget)
        layout.setContentsMargins(8, 4, 8, 4)
        layout.setSpacing(2)

        user_label = QLabel("User")
        user_label.setObjectName("userLabel")
        user_label.setFont(QFont("Segoe UI", 12, QFont.Bold))

        role_label = QLabel("Administrator")
        role_label.setObjectName("roleLabel")
        role_label.setFont(QFont("Segoe UI", 9))

        layout.addWidget(user_label)
        layout.addWidget(role_label)
        widget.setFixedSize(widget.sizeHint())  # Define fixed size
        return widget

    def initialize_particles(self):
        """Inicializa e posiciona o sistema de part√≠culas"""
        if hasattr(self, 'particle_system'):
            self.particle_system.setGeometry(0, 0, self.width(), self.height())
            self.particle_system.update()

    def load_stylesheet(self):
        """Carrega CSS atualizado de forma mais robusta"""
        try:
            # Constr√≥i um caminho absoluto para o arquivo CSS
            current_dir = os.path.dirname(os.path.abspath(__file__))
            css_path = os.path.join(current_dir, 'styles', 'main.css')

            if os.path.exists(css_path):
                with open(css_path, 'r', encoding='utf-8') as f:
                    css_content = f.read()
                    # Aplicar CSS
                    self.setStyleSheet(css_content)
                print(f"CSS aplicado com sucesso de: {css_path}")
            else:
                print(f"ERRO: Arquivo CSS n√£o encontrado em: {css_path}")
                self.apply_minimal_styles()
        except Exception as e:
            print(f"Erro ao carregar CSS: {e}")
            self.apply_minimal_styles()

    def apply_minimal_styles(self):
        """Aplica estilos m√≠nimos para garantir funcionamento"""
        minimal_css = """
            QMainWindow {
                background-color: #1a1a1a;
                color: #ffffff;
            }

            /* ===== ESTILOS DO HEADER ADICIONADOS AQUI ===== */
            #headerBar {
                background: qlineargradient(x1:0, y1:0, x2:1, y2:0, stop:0 #2d2d2d, stop:1 #3a3a3a);
                border-bottom: 2px solid #4a4a4a;
                outline: none;
            }
            #headerTitle {
                color: #ffffff;
                background: transparent;
                font-size: 16px;
                font-weight: bold;
            }
            #headerSubtitle {
                color: #cccccc;
                background: transparent;
                font-size: 10px;
            }
            #userLabel {
                color: #ffffff;
                background: transparent;
            }
            #roleLabel {
                color: #cccccc;
                background: transparent;
            }
            /* ============================================== */

            QPushButton#mainSpoofButton {
                background: qlineargradient(x1:0, y1:0, x2:1, y2:0, stop:0 #4a90e2, stop:1 #50e3c2);
                color: #000000;
                border: none;
                border-radius: 8px;
                font-size: 13px;
                font-weight: bold;
                padding: 14px 28px;
            }
            QPushButton#mainSpoofButton:hover {
                background: qlineargradient(x1:0, y1:0, x2:1, y2:0, stop:0 #5a9fee, stop:1 #60f3d2);
            }
            QLabel#hardwareValue {
                font-size: 16px;
                font-weight: bold;
            }
        """
        self.setStyleSheet(minimal_css)

    def closeEvent(self, event):
        """Handler de fechamento"""
        reply = QMessageBox.question(
            self, 'Exit Confirmation',
            'Are you sure you want to exit Lunar Spoofer?',
            QMessageBox.StandardButton.Yes | QMessageBox.StandardButton.No,
            QMessageBox.StandardButton.No
        )

        if reply == QMessageBox.StandardButton.Yes:
            event.accept()
        else:
            event.ignore()


# src\ui\adapters\controller_adapter.py

# TODO: Implement


# src\ui\adapters\theme_manager.py

# TODO: Implement


# src\ui\components\dashboard.py

from PySide6.QtWidgets import (QFrame, QVBoxLayout, QHBoxLayout, QLabel,
                              QPushButton, QGridLayout, QWidget)
from PySide6.QtCore import Qt, QTimer
from PySide6.QtGui import QFont
# import psutil # REMOVED (now in hardware_reader)

# NEW IMPORTS
from src.utils.hardware_reader import HardwareReader
from src.ui.components.hardware_graphs import MiniGraphWidget

from src.ui.components.switch import SwitchButton

# NEW: Define a ceiling for the DISK graph (ex: 100 MB/s = 100%)
DISK_GRAPH_MAX_MB_S = 100.0

class Dashboard(QFrame):
    def __init__(self, controller=None):
        super().__init__()
        self.controller = controller
        self.switch_states = {
            "mac": False,
            "guid": False,
            "hwid": False
        }

        # Instantiate the reader
        self.hw_reader = HardwareReader()

        self.setup_ui()
        self.setup_timers()

    def setup_ui(self):
        """Configura dashboard com hardware stats ACIMA e flutuante"""
        self.setObjectName("dashboard")

        # Layout principal REMOVIDO
        # main_layout = QVBoxLayout(self)
        # main_layout.setContentsMargins(30, 20, 30, 20)
        # main_layout.setSpacing(25)
        self.setLayout(None) # Define layout nulo para posicionamento manual

        # Painel de hardware (agora flutuante)
        self.hardware_panel = self.create_hardware_panel()
        self.hardware_panel.setParent(self) # Define o parent
        # main_layout.addWidget(hardware_panel) # REMOVIDO

        # √Årea de conte√∫do principal
        self.content_area = self.create_content_area()
        self.content_area.setParent(self) # Define o parent
        # main_layout.addWidget(content_area) # REMOVIDO

    def resizeEvent(self, event):
        """Posiciona os pain√©is manualmente"""
        super().resizeEvent(event)
        w = self.width()
        h = self.height()

        panel_height = 60
        panel_margin_top = 20 # de 30 para 20 (subiu)
        content_margin_top = 110 # de 110 para 100 (subiu)

        # Posiciona o painel de hardware no topo e centro
        if hasattr(self, 'hardware_panel'):
            panel_width = self.hardware_panel.width() # 600px fixo
            self.hardware_panel.setGeometry(
                30,  # Alinhado √† esquerda com o conte√∫do
                panel_margin_top,        # Margem do topo
                panel_width,
                panel_height
            )
            self.hardware_panel.raise_()

        # Posiciona a √°rea de conte√∫do abaixo do painel
        if hasattr(self, 'content_area'):
            self.content_area.setGeometry(
                30, # Margem esquerda
                content_margin_top,
                w - 60, # Margem esquerda/direita
                h - content_margin_top - 20 # Margem topo/baixo
            )

    def create_content_area(self):
        """Cria √°rea de conte√∫do principal"""
        content_frame = QFrame()
        content_frame.setObjectName("contentFrame")

        layout = QHBoxLayout(content_frame)
        layout.setContentsMargins(0, 0, 0, 0)
        layout.setSpacing(25)

        # Painel de a√ß√µes principal (esquerda)
        action_panel = self.create_action_panel()
        layout.addWidget(action_panel)

        # Painel de m√≥dulos compacto (direita)
        modules_panel = self.create_compact_modules_panel()
        layout.addWidget(modules_panel)

        return content_frame

    def create_hardware_panel(self):
        """Cria painel de informa√ß√µes de hardware (Estilo Pill)"""
        hardware_frame = QFrame()
        # [ALTERADO] Novo objectName para o CSS
        hardware_frame.setObjectName("pillHardwarePanel")
        hardware_frame.setFixedHeight(60) # de 80 para 60
        hardware_frame.setFixedWidth(900) # de 600 para 900

        layout = QHBoxLayout(hardware_frame)
        layout.setContentsMargins(20, 7, 20, 3) # Margens (esquerda/direita 20)
        layout.setSpacing(10) # Espa√ßamento reduzido

        # Stats de hardware (com gr√°ficos)
        self.cpu_stat = self.create_hardware_stat("CPU", "0%", "#50E3C2", show_graph=True)
        self.memory_stat = self.create_hardware_stat("MEMORY", "0%", "#4A90E2", show_graph=True)
        self.disk_stat = self.create_hardware_stat("DISK", "0 MB/s", "#B8E986", show_graph=True)
        self.status_stat = self.create_hardware_stat("STATUS", "READY", "#FF6B6B", show_graph=False)

        layout.addWidget(self.cpu_stat)
        layout.addStretch(1) # Espa√ßador
        layout.addWidget(self.memory_stat)
        layout.addStretch(1) # Espa√ßador
        layout.addWidget(self.disk_stat)
        layout.addStretch(1) # Espa√ßador
        layout.addWidget(self.status_stat)

        return hardware_frame

    def create_hardware_stat(self, title, value, color, show_graph=True):
        """Cria widget de stat (Texto + Gr√°fico Opcional)"""

        # Widget principal (Stat + Gr√°fico)
        main_widget = QFrame()
        main_layout = QHBoxLayout(main_widget)
        main_layout.setContentsMargins(0, 0, 0, 0)
        main_layout.setSpacing(10)

        # Widget de Texto (T√≠tulo + Valor)
        text_widget = QFrame()
        text_layout = QVBoxLayout(text_widget)
        text_layout.setContentsMargins(0, 0, 0, 0)
        text_layout.setSpacing(4)
        text_layout.setAlignment(Qt.AlignCenter)
        text_widget.setFixedWidth(80) # Largura fixa para o texto

        title_label = QLabel(title)
        title_label.setObjectName("hardwareTitle")
        title_label.setFont(QFont("Segoe UI", 10, QFont.Medium))
        title_label.setAlignment(Qt.AlignLeft | Qt.AlignVCenter)

        value_label = QLabel(value)
        value_label.setObjectName("hardwareValue")
        value_label.setFont(QFont("Segoe UI", 16, QFont.Bold))
        value_label.setAlignment(Qt.AlignLeft | Qt.AlignVCenter)
        value_label.setStyleSheet(f"color: {color}; background: transparent;")

        text_layout.addWidget(title_label)
        text_layout.addWidget(value_label)

        main_layout.addWidget(text_widget) # Adiciona texto √† esquerda

        # Gr√°fico (Direita)
        if show_graph:
            graph_widget = MiniGraphWidget()
            graph_widget.set_color(color)
            main_layout.addWidget(graph_widget) # Adiciona gr√°fico √† direita

            # Armazenar refer√™ncia ao gr√°fico
            if title == "CPU":
                self.cpu_graph = graph_widget
            elif title == "MEMORY":
                self.memory_graph = graph_widget
            elif title == "DISK":
                self.disk_graph = graph_widget

            # (80px texto + 10px espa√ßo + 100px gr√°fico)
            main_widget.setFixedSize(190, 50)
        else:
            # Se n√£o houver gr√°fico, o tamanho √© menor
            main_widget.setFixedSize(90, 50)

        return main_widget

    def create_action_panel(self):
        """Cria painel de a√ß√µes principal"""
        action_frame = QFrame()
        action_frame.setObjectName("actionPanel")

        layout = QVBoxLayout(action_frame)
        layout.setContentsMargins(0, 0, 0, 0)
        layout.setSpacing(20)

        # Container do bot√£o principal
        button_container = QFrame()
        button_container.setObjectName("buttonContainer")
        button_container.setFixedHeight(180)

        button_layout = QVBoxLayout(button_container)
        button_layout.setAlignment(Qt.AlignCenter)
        button_layout.setSpacing(15)

        # T√≠tulo
        title_label = QLabel("SYSTEM SECURITY")
        title_label.setObjectName("sectionTitle")
        title_label.setAlignment(Qt.AlignCenter)
        title_label.setFont(QFont("Segoe UI", 16, QFont.Bold))

        # Bot√£o de spoofing principal
        self.spoof_button = QPushButton("START SPOOFING")
        self.spoof_button.setObjectName("mainSpoofButton")
        self.spoof_button.setCursor(Qt.PointingHandCursor)
        self.spoof_button.setFixedHeight(52)
        self.spoof_button.clicked.connect(self.on_spoof_button_click)

        # Status do spoofing
        self.spoof_status = QLabel("System ready for spoofing protocol")
        self.spoof_status.setObjectName("spoofStatus")
        self.spoof_status.setAlignment(Qt.AlignCenter)
        self.spoof_status.setWordWrap(True)

        button_layout.addWidget(title_label)
        button_layout.addWidget(self.spoof_button)
        button_layout.addWidget(self.spoof_status)

        layout.addWidget(button_container)
        layout.addStretch(1)

        return action_frame

    def create_compact_modules_panel(self):
        """Cria painel de m√≥dulos compacto com switches"""
        modules_frame = QFrame()
        modules_frame.setObjectName("modulesPanel")
        modules_frame.setFixedWidth(300)

        layout = QVBoxLayout(modules_frame)
        layout.setContentsMargins(20, 20, 20, 20)
        layout.setSpacing(15)

        # T√≠tulo
        title = QLabel("SECURITY MODULES")
        title.setObjectName("modulesTitle")
        title.setFont(QFont("Segoe UI", 14, QFont.Bold))

        layout.addWidget(title)

        # Container dos switches
        switches_container = QWidget()
        switches_layout = QVBoxLayout(switches_container)
        switches_layout.setContentsMargins(0, 0, 0, 0)
        switches_layout.setSpacing(10)

        # M√≥dulos com switches
        modules_data = [
            ("MAC Address Spoofing", "mac"),
            ("GUID Spoofing", "guid"),
            ("HWID Spoofing", "hwid")
        ]

        self.module_switches = {}

        for module_name, module_id in modules_data:
            switch_widget = self.create_switch_row(module_name, module_id)
            switches_layout.addWidget(switch_widget)
            self.module_switches[module_id] = switch_widget.findChild(SwitchButton)

        layout.addWidget(switches_container)
        layout.addStretch(1)

        return modules_frame

    def create_switch_row(self, name, module_id):
        """Cria uma linha compacta com switch"""
        row_widget = QFrame()
        row_widget.setObjectName(f"switchRow_{module_id}")
        row_widget.setFixedHeight(35)

        layout = QHBoxLayout(row_widget)
        layout.setContentsMargins(10, 0, 10, 0)
        layout.setSpacing(15)

        # Nome do m√≥dulo
        name_label = QLabel(name)
        name_label.setObjectName("moduleName")
        name_label.setFont(QFont("Segoe UI", 11))

        # Switch
        switch = SwitchButton()
        switch.setObjectName(f"moduleSwitch_{module_id}")
        switch.toggled.connect(lambda checked, mid=module_id: self.on_module_toggled(mid, checked))

        layout.addWidget(name_label)
        layout.addStretch(1)
        layout.addWidget(switch)

        return row_widget

    def on_module_toggled(self, module_id, checked):
        """Handler para toggle dos m√≥dulos"""
        self.switch_states[module_id] = checked
        status = "ENABLED" if checked else "DISABLED"
        print(f"Module {module_id}: {status}")

    def setup_timers(self):
        """Configura timers para atualiza√ß√£o em tempo real"""
        self.stats_timer = QTimer()
        self.stats_timer.timeout.connect(self.update_hardware_stats)
        # Atualiza√ß√£o mais r√°pida para o gr√°fico
        self.stats_timer.start(1000) # 1 segundo
        # A primeira chamada deve ser do timer, ap√≥s 1s.
        # self.update_hardware_stats()

    def on_spoof_button_click(self):
        """Handler do bot√£o de spoofing"""
        # Coletar estados dos switches
        enabled_modules = [mid for mid, state in self.switch_states.items() if state]

        if not enabled_modules:
            self.spoof_status.setText("No modules enabled for spoofing")
            return

        self.spoof_button.setText("PROCESSING...")
        self.spoof_button.setEnabled(False)
        self.spoof_status.setText(f"Executing: {', '.join(enabled_modules)}")

        # Simular processamento
        QTimer.singleShot(3000, self.reset_spoof_button)

    def reset_spoof_button(self):
        """Reseta bot√£o ap√≥s processamento"""
        self.spoof_button.setText("START SPOOFING")
        self.spoof_button.setEnabled(True)
        self.spoof_status.setText("Security protocol completed")

        QTimer.singleShot(2000, lambda: self.spoof_status.setText("System ready for spoofing protocol"))

    def update_hardware_stats(self):
        """Atualiza as estat√≠sticas de hardware e os gr√°ficos"""
        try:
            # Buscar dados do Reader
            cpu_percent = self.hw_reader.get_cpu_percent()
            memory_percent = self.hw_reader.get_memory_percent()
            disk_mbs = self.hw_reader.get_disk_mbs() # CHANGED

            # Atualizar Labels
            self.cpu_stat.findChild(QLabel, "hardwareValue").setText(f"{cpu_percent:.0f}%")
            self.memory_stat.findChild(QLabel, "hardwareValue").setText(f"{memory_percent:.0f}%")
            # CHANGED: Format the disk label as MB/s
            self.disk_stat.findChild(QLabel, "hardwareValue").setText(f"{disk_mbs:.0f} MB/s")

            # Atualizar Gr√°ficos
            if hasattr(self, 'cpu_graph'):
                self.cpu_graph.add_data_point(cpu_percent)
            if hasattr(self, 'memory_graph'):
                self.memory_graph.add_data_point(memory_percent)
            if hasattr(self, 'disk_graph'):
                # CHANGED: Calculate the % for the graph
                disk_percent_for_graph = (disk_mbs / DISK_GRAPH_MAX_MB_S) * 100.0
                self.disk_graph.add_data_point(disk_percent_for_graph)

            # Atualizar Status
            if cpu_percent > 80:
                self.status_stat.findChild(QLabel, "hardwareValue").setText("HIGH LOAD")
                self.status_stat.findChild(QLabel, "hardwareValue").setStyleSheet("color: #FF6B6B;")
            elif cpu_percent > 50:
                self.status_stat.findChild(QLabel, "hardwareValue").setText("MODERATE")
                self.status_stat.findChild(QLabel, "hardwareValue").setStyleSheet("color: #FFA726;")
            else:
                self.status_stat.findChild(QLabel, "hardwareValue").setText("OPTIMAL")
                self.status_stat.findChild(QLabel, "hardwareValue").setStyleSheet("color: #B8E986;")

        except Exception as e:
            print(f"Hardware stats update error: {e}")


# src\ui\components\hardware_graphs.py

# src/ui/components/hardware_graphs.py

from PySide6.QtWidgets import QWidget
from PySide6.QtCore import Qt, QPointF, QRectF
from PySide6.QtGui import (QPainter, QColor, QBrush, QPolygonF,
                           QLinearGradient, QRadialGradient, QImage) # [NOVO] QImage

class MiniGraphWidget(QWidget):
    def __init__(self, parent=None, max_points=30):
        super().__init__(parent)
        self.max_points = max_points
        self.data_points = [0.0] * self.max_points
        self.graph_color = QColor("#50E3C2") # Cor padr√£o
        self.setFixedSize(100, 40)

        # O "zoom" vertical m√≠nimo que voc√™ sugeriu
        self.MIN_VERTICAL_RANGE = 30

    def set_color(self, color_hex):
        """Define a cor principal do gr√°fico."""
        self.graph_color = QColor(color_hex)
        self.update()

    def add_data_point(self, value):
        """Adiciona um novo ponto de dado e atualiza o gr√°fico."""
        if value < 0: value = 0
        # if value > 100: value = 100  <-- [REMOVIDO]

        self.data_points.append(value)

        while len(self.data_points) > self.max_points:
            self.data_points.pop(0)

        self.update() # Solicita o redesenho

    def paintEvent(self, event):
        """Desenha o gr√°fico com scaling instant√¢neo E FADE NOS DOIS EIXOS."""
        try:
            painter = QPainter(self)
            painter.setRenderHint(QPainter.Antialiasing)

            w = self.width()
            h = self.height()

            if not self.data_points:
                return

            # --- 1. L√≥gica de Scaling Instant√¢neo (Baseado no √∫ltimo ponto) ---
            current_value = self.data_points[-1]
            half_range = self.MIN_VERTICAL_RANGE / 2.0
            graph_min = current_value - half_range
            graph_max = current_value + half_range

            # --- 2. Clamping (Travar a escala apenas em 0) ---
            if graph_min < 0.0:
                overshoot = 0.0 - graph_min
                graph_min = 0.0
                graph_max += overshoot

            # --- 3. Normaliza√ß√£o e C√°lculo do Pol√≠gono ---
            current_range = graph_max - graph_min
            if current_range < 0.01:
                current_range = self.MIN_VERTICAL_RANGE

            polygon = QPolygonF()
            polygon.append(QPointF(0, h)) # Canto inferior esquerdo

            line_polygon = QPolygonF() # Pol√≠gono apenas para a linha

            step_x = w / (self.max_points - 1)

            for i, value in enumerate(self.data_points):
                normalized_y = (value - graph_min) / current_range

                # Clamp de seguran√ßa
                if normalized_y < 0.0: normalized_y = 0.0
                if normalized_y > 1.0: normalized_y = 1.0

                y = h - (normalized_y * h)
                x = i * step_x

                polygon.append(QPointF(x, y))
                line_polygon.append(QPointF(x, y))

            polygon.append(QPointF(w, h)) # Canto inferior direito

            # Cores
            solid_color = QColor(self.graph_color)
            faded_color = QColor(self.graph_color)
            faded_color.setAlphaF(0.0) # 0% opaco

            # --- 4. [ALTERADO] Desenhar o Preenchimento (Fill) em um Buffer ---

            # Criar buffer off-screen para aplicar os dois gradientes
            buffer = QImage(self.size(), QImage.Format_ARGB32_Premultiplied)
            buffer.fill(Qt.transparent)

            buffer_painter = QPainter(buffer)
            buffer_painter.setRenderHint(QPainter.Antialiasing)

            # Etapa 1: Gradiente Vertical (de cima para baixo)
            v_grad = QLinearGradient(0, 0, 0, h)
            v_grad.setColorAt(0.0, solid_color.lighter(120)) # Cor no topo
            v_grad.setColorAt(1.0, faded_color) # Transparente embaixo

            buffer_painter.setPen(Qt.NoPen)
            buffer_painter.setBrush(v_grad)
            buffer_painter.drawPolygon(polygon)

            # **ETAPA 2: APLICAR FADE "EIXO X" (Esquerda E Direita)**
            buffer_painter.setCompositionMode(QPainter.CompositionMode_DestinationIn)

            h_grad_mask = QLinearGradient(0, 0, w, 0)
            h_grad_mask.setColorAt(0.0, QColor(0,0,0,0))   # Esquerda = Transparente
            h_grad_mask.setColorAt(0.8, QColor(0,0,0,255)) # 80% = Opaco (Foco)
            h_grad_mask.setColorAt(1.0, QColor(0,0,0,0))   # Direita = Transparente

            buffer_painter.fillRect(self.rect(), h_grad_mask)
            buffer_painter.end()

            # --- 5. Desenhar o Buffer na Tela ---
            painter.drawImage(0, 0, buffer)

            # --- 6. Desenhar a Linha (com Fade Esquerda/Direita) ---
            h_grad_line = QLinearGradient(0, 0, w, 0)
            h_grad_line.setColorAt(0.0, faded_color) # Esquerda = Transparente
            h_grad_line.setColorAt(0.8, solid_color) # 80% = S√≥lido (Foco)
            h_grad_line.setColorAt(1.0, faded_color) # Direita = Transparente

            pen = painter.pen()
            pen.setBrush(h_grad_line)
            pen.setWidthF(1.5)
            painter.setPen(pen)
            painter.setBrush(Qt.NoBrush)

            painter.drawPolyline(line_polygon)

        except Exception as e:
            print(f"Erro no paintEvent do MiniGraph: {e}")


# src\ui\components\hardware_tab.py

# TODO: Implement


# src\ui\components\network_selector.py

# TODO: Implement


# src\ui\components\particles.py

import random
from PySide6.QtWidgets import QWidget
from PySide6.QtCore import Qt, QTimer, QPointF
from PySide6.QtGui import QPainter, QColor, QBrush

class Particle:
    def __init__(self, x, y, size, color, speed_x, speed_y, opacity):
        self.x = x
        self.y = y
        self.size = size
        self.color = color
        self.speed_x = speed_x
        self.speed_y = speed_y
        self.opacity = opacity
        self.original_opacity = opacity
        self.fade_direction = random.choice([-1, 1])
        self.fade_speed = random.uniform(0.005, 0.02)

class ParticleSystem(QWidget):
    def __init__(self, parent=None, particle_count=60):
        super().__init__(parent)
        self.particles = []
        self.particle_count = particle_count
        self.timer = QTimer()
        self.timer.timeout.connect(self.update_particles)
        self.timer.start(33)  # ~30 FPS
        
        # Configurar para ser completamente transparente
        self.setAttribute(Qt.WA_TransparentForMouseEvents)
        self.setAttribute(Qt.WA_TranslucentBackground)
        
        # Garantir que fique atr√°s de outros widgets
        self.lower()

        # Inicializar part√≠culas apenas quando o widget for mostrado
        self.initialized = False

    def showEvent(self, event):
        """Inicializa part√≠culas quando o widget √© mostrado"""
        if not self.initialized:
            self.init_particles(self.particle_count)
            self.initialized = True
        super().showEvent(event)

    def init_particles(self, count):
        """Inicializa part√≠culas distribu√≠das por toda a √°rea"""
        width = self.width() if self.width() > 0 else 800
        height = self.height() if self.height() > 0 else 600

        # Cores mais vibrantes para serem vis√≠veis atrav√©s do header
        colors = [
            QColor(255, 255, 255),  # Branco puro
            QColor(220, 230, 255),  # Azul muito claro
            QColor(240, 240, 255),  # Branco azulado
            QColor(255, 250, 250),  # Branco levemente rosado
        ]

        self.particles = []
        for _ in range(count):
            # Distribuir part√≠culas por toda a √°rea
            x = random.uniform(0, width)
            y = random.uniform(0, height)
            size = random.uniform(1.0, 3.0)  # Part√≠culas um pouco maiores
            color = random.choice(colors)

            # Velocidades mais lentas
            speed_x = random.uniform(-0.1, 0.1)
            speed_y = random.uniform(-0.1, 0.1)

            # Opacidade mais alta para serem vis√≠veis
            opacity = random.uniform(0.3, 0.8)

            self.particles.append(Particle(x, y, size, color, speed_x, speed_y, opacity))

    def update_particles(self):
        """Atualiza posi√ß√£o e estado das part√≠culas"""
        if not self.isVisible() or not self.initialized:
            return

        width = self.width()
        height = self.height()

        if width <= 0 or height <= 0:
            return

        for particle in self.particles:
            # Atualizar posi√ß√£o
            particle.x += particle.speed_x
            particle.y += particle.speed_y

            # Efeito de fade pulsante
            particle.opacity += particle.fade_speed * particle.fade_direction

            # Garantir que a opacidade fique dentro dos limites v√°lidos
            if particle.opacity >= particle.original_opacity:
                particle.opacity = particle.original_opacity
                particle.fade_direction = -1
            elif particle.opacity <= 0.1:
                particle.opacity = 0.1
                particle.fade_direction = 1

            # Reposicionar part√≠culas que saem da tela
            if particle.x < -50:
                particle.x = width + 50
                particle.y = random.uniform(0, height)
            elif particle.x > width + 50:
                particle.x = -50
                particle.y = random.uniform(0, height)

            if particle.y < -50:
                particle.y = height + 50
                particle.x = random.uniform(0, width)
            elif particle.y > height + 50:
                particle.y = -50
                particle.x = random.uniform(0, width)

        self.update()

    def paintEvent(self, event):
        """Desenha as part√≠culas - CORRIGIDO para evitar erros de QPainter"""
        if not self.initialized or not self.isVisible():
            return

        try:
            painter = QPainter(self)
            if not painter.isActive():
                return
                
            painter.setRenderHint(QPainter.Antialiasing)
            
            # IMPORTANTE: N√£o preencher o fundo - deixar transparente
            painter.setCompositionMode(QPainter.CompositionMode_SourceOver)
            
            for particle in self.particles:
                # Garantir que a opacidade esteja dentro do range v√°lido
                opacity = max(0.05, min(1.0, particle.opacity))

                color = QColor(particle.color)
                color.setAlphaF(opacity)

                painter.setPen(Qt.NoPen)
                painter.setBrush(QBrush(color))

                # Desenhar part√≠cula
                painter.drawEllipse(QPointF(particle.x, particle.y), particle.size, particle.size)
                
            painter.end()
            
        except Exception as e:
            print(f"Erro no ParticleSystem paintEvent: {e}")

    def resizeEvent(self, event):
        """Reinicializa part√≠culas quando o tamanho muda"""
        super().resizeEvent(event)
        if self.initialized and event.oldSize().width() > 0 and event.oldSize().height() > 0:
            old_width = event.oldSize().width()
            old_height = event.oldSize().height()
            new_width = event.size().width()
            new_height = event.size().height()

            scale_x = new_width / old_width
            scale_y = new_height / old_height

            for particle in self.particles:
                particle.x *= scale_x
                particle.y *= scale_y


# src\ui\components\progress_indicator.py

# TODO: Implement


# src\ui\components\sidebar.py

from PySide6.QtWidgets import (QFrame, QVBoxLayout, QPushButton,
                              QLabel, QSizePolicy)
from PySide6.QtCore import Qt, Signal, QSize
from PySide6.QtGui import QFont, QPixmap, QPainter, QLinearGradient, QColor, QIcon
import os

class Sidebar(QFrame):
    navigation_changed = Signal(str)

    def __init__(self, parent=None):
        super().__init__(parent)
        self.current_page = "dashboard"
        self.setup_ui()

    def setup_ui(self):
        """Configura a sidebar mais estreita"""
        self.setFixedWidth(120)  # Reduzida de 260 para 200
        self.setObjectName("sidebar")

        # Layout principal
        layout = QVBoxLayout(self)
        layout.setContentsMargins(0, 0, 0, 0)
        layout.setSpacing(0)

        # Header removido (agora est√° no HeaderBar)

        # Logo no topo
        logo_header = self.create_logo_header()
        layout.addWidget(logo_header)

        # Navega√ß√£o limpa
        nav_buttons = self.create_navigation_buttons()
        layout.addWidget(nav_buttons)

        # Espa√ßo flex√≠vel
        layout.addStretch(1)

        # Footer minimalista
        footer = self.create_footer()
        layout.addWidget(footer)

    def create_header(self):
        """Cria cabe√ßalho minimalista"""
        header_frame = QFrame()
        header_frame.setObjectName("sidebarHeader")
        header_frame.setFixedHeight(100)

        layout = QVBoxLayout(header_frame)
        layout.setContentsMargins(20, 20, 20, 15)

        # Logo elegante
        logo_label = QLabel("LUNAR")
        logo_label.setObjectName("logoLabel")
        logo_label.setAlignment(Qt.AlignCenter)
        logo_label.setFont(QFont("Segoe UI", 18, QFont.Bold))

        # Subt√≠tulo sutil
        subtitle_label = QLabel("SYSTEM PROTECTION")
        subtitle_label.setObjectName("subtitleLabel")
        subtitle_label.setAlignment(Qt.AlignCenter)
        subtitle_label.setFont(QFont("Segoe UI", 8))

        layout.addWidget(logo_label)
        layout.addWidget(subtitle_label)

        return header_frame

    def create_logo_header(self):
        """Cria o header da sidebar com o logo"""
        logo_label = QLabel()
        logo_label.setObjectName("sidebarLogo")
        logo_label.setFixedHeight(80) # Altura similar ao header_bar
        logo_label.setAlignment(Qt.AlignCenter)

        # Carregar √≠cone - caminho correto
        icon_path = os.path.join(os.path.dirname(__file__), '..', '..', '..', 'assets', 'icons', 'logo.png')

        if not os.path.exists(icon_path):
             # Fallback para pasta local de icons
             icon_path = os.path.join(os.path.dirname(__file__), '..', 'icons', 'logo.png')

        if os.path.exists(icon_path):
            pixmap = QPixmap(icon_path)
            pixmap = pixmap.scaled(64, 64, Qt.KeepAspectRatio, Qt.SmoothTransformation)
            logo_label.setPixmap(pixmap)
        else:
            print(f"Logo n√£o encontrado: {icon_path}")
            logo_label.setText("LUNAR") # Fallback
            logo_label.setFont(QFont("Segoe UI", 18, QFont.Bold))
            logo_label.setStyleSheet("color: white;")

        return logo_label

    def create_navigation_buttons(self):
        """Cria bot√µes de navega√ß√£o minimalistas"""
        nav_frame = QFrame()
        nav_frame.setObjectName("navFrame")

        layout = QVBoxLayout(nav_frame)
        layout.setContentsMargins(10, 20, 10, 20)  # Margens reduzidas
        layout.setSpacing(6) # Espa√ßamento dobrado (3 -> 6)

        # Bot√µes atualizados
        nav_items = [
            # (Texto p/ ToolTip, page_id, icon_filename, is_active)
            ("Dashboard", "dashboard", "dashboard.png", True),
            ("Security Tools", "tools", "stools.png", False),
            ("System Info", "system_info", "sinfo.png", False),
            ("Settings", "settings", "settings.png", False),
            ("Support", "support", "support.png", False)
        ]

        self.nav_buttons = {}

        for text, page_id, icon_name, is_active in nav_items:
            btn = QPushButton() # Criar bot√£o sem texto
            btn.setToolTip(text) # Adicionar o texto como dica
            btn.setObjectName(f"navButton_{page_id}")
            btn.setCursor(Qt.PointingHandCursor)
            btn.setFixedHeight(108)  # Altura aumentada (72 -> 108)
            btn.setSizePolicy(QSizePolicy.Expanding, QSizePolicy.Fixed)

            # L√≥gica para adicionar √≠cone
            icon_path = os.path.join(os.path.dirname(__file__), '..', '..', '..', 'assets', 'icons', icon_name)

            if not os.path.exists(icon_path):
                icon_path = os.path.join(os.path.dirname(__file__), '..', 'icons', icon_name)

            if os.path.exists(icon_path):
                pixmap = QPixmap(icon_path)
                btn.setIcon(QIcon(pixmap))
                btn.setIconSize(QSize(54, 54)) # √çcone aumentado (36 -> 54)
            else:
                print(f"√çcone de navega√ß√£o n√£o encontrado: {icon_path}")
                btn.setText(text) # Fallback para texto se √≠cone falhar

            # Conectar sinal
            btn.clicked.connect(lambda checked, pid=page_id: self.on_navigation_click(pid))

            # Estado ativo
            if is_active:
                self.set_button_active(btn, True)

            layout.addWidget(btn)
            self.nav_buttons[page_id] = btn

        return nav_frame

    def create_footer(self):
        """Cria rodap√© minimalista"""
        footer_frame = QFrame()
        footer_frame.setObjectName("footerFrame")
        footer_frame.setFixedHeight(60)

        layout = QVBoxLayout(footer_frame)
        layout.setContentsMargins(10, 8, 10, 8)
        layout.setSpacing(4)

        # Status
        status_label = QLabel("‚óè SECURE")
        status_label.setObjectName("statusLabel")
        status_label.setAlignment(Qt.AlignCenter)
        status_label.setFont(QFont("Segoe UI", 9, QFont.Bold))

        layout.addStretch(1)
        layout.addWidget(status_label)

        return footer_frame

    def on_navigation_click(self, page_id):
        """Handler para navega√ß√£o"""
        # Atualizar estados dos bot√µes
        for pid, btn in self.nav_buttons.items():
            self.set_button_active(btn, pid == page_id)

        self.current_page = page_id
        self.navigation_changed.emit(page_id)

    def set_button_active(self, button, active):
        """Define estado ativo do bot√£o"""
        button.setProperty("active", "true" if active else "false")
        button.style().unpolish(button)
        button.style().polish(button)


# src\ui\components\software_tab.py

# TODO: Implement


# src\ui\components\spoofing_panel.py

# TODO: Implement


# src\ui\components\switch.py

from PySide6.QtWidgets import QWidget
from PySide6.QtCore import Qt, QPropertyAnimation, QEasingCurve, Signal, Property
from PySide6.QtGui import QPainter, QColor, QPen, QBrush

class SwitchButton(QWidget):
    toggled = Signal(bool)

    def __init__(self, parent=None, width=50, height=24):
        super().__init__(parent)
        self._checked = False
        self._circle_position = 3
        self._width = width
        self._height = height

        # Anima√ß√£o
        self._animation = QPropertyAnimation(self, b"circle_position")
        self._animation.setDuration(200)
        self._animation.setEasingCurve(QEasingCurve.InOutQuad)

        self.setFixedSize(self._width, self._height)
        self.setCursor(Qt.PointingHandCursor)

    def get_circle_position(self):
        return self._circle_position

    def set_circle_position(self, pos):
        self._circle_position = pos
        self.update()

    circle_position = Property(float, get_circle_position, set_circle_position)

    def isChecked(self):
        return self._checked

    def setChecked(self, checked):
        if self._checked != checked:
            self._checked = checked
            self.toggled.emit(checked)
            self.animate_switch(checked)

    def animate_switch(self, checked):
        start = 3
        end = self._width - 21  # width - (circle diameter + margin)
        if not checked:
            start, end = end, start

        self._animation.setStartValue(start)
        self._animation.setEndValue(end)
        self._animation.start()

    def paintEvent(self, event):
        painter = QPainter(self)
        painter.setRenderHint(QPainter.Antialiasing)

        # Fundo do switch
        if self._checked:
            bg_color = QColor("#4a90e2")  # Azul quando ativo
            border_color = QColor("#357abd")
        else:
            bg_color = QColor("#333333")  # Cinza quando inativo
            border_color = QColor("#555555")

        # Desenhar fundo
        painter.setPen(QPen(border_color, 1))
        painter.setBrush(QBrush(bg_color))
        painter.drawRoundedRect(0, 0, self._width, self._height, self._height // 2, self._height // 2)

        # C√≠rculo deslizante
        circle_color = QColor("#ffffff")
        painter.setPen(Qt.NoPen)
        painter.setBrush(QBrush(circle_color))
        painter.drawEllipse(int(self._circle_position), 3, 18, 18)

    def mousePressEvent(self, event):
        if event.button() == Qt.LeftButton:
            self.setChecked(not self._checked)

    def enterEvent(self, event):
        self.setCursor(Qt.PointingHandCursor)
        super().enterEvent(event)

    def leaveEvent(self, event):
        self.setCursor(Qt.ArrowCursor)
        super().leaveEvent(event)


# src\ui\components\system_stats.py

# TODO: Implement


# src\ui\components\toast_notification.py

# TODO: Implement


# src\ui\styles\main.css

/* ===== RESET PARA QFRAME ===== */
QFrame {
    background: transparent;
    border: none;
}

/* Garantir que os QFrames espec√≠ficos tenham seus estilos */
#sidebar, #dashboard, #contentArea, #contentStack {
    background: transparent;
}

/* ===== ESTILOS GERAIS ===== */
QMainWindow {
    background: #141414;
    color: #ffffff;
    font-family: "Segoe UI", system-ui;
    font-size: 13px;
}

#centralWidget {
    background: #141414;
}

QWidget {
    background: transparent;
    color: #ffffff;
    border: none;
}

/* ===== HEADER BAR - REMOVED ===== */
/* The #iconButton and #userWidget styles still work */

/* BOT√ïES DO HEADER - SEM FUNDO (APENAS HOVER) */
#iconButton {
    background: transparent;
    border: none;
    border-radius: 6px;
    padding: 6px;
}

#iconButton:hover {
    background: rgba(255, 255, 255, 0.1);
}

#iconButton:pressed {
    background: rgba(255, 255, 255, 0.15);
}

#userWidget {
    background: transparent;
    border: none;
    border-radius: 6px;
    padding: 0px;
}

#userLabel {
    color: #ffffff;
    background: transparent;
    font-size: 12px;
    font-weight: bold;
}

#roleLabel {
    color: #cccccc;
    background: transparent;
    font-size: 9px;
}

/* ===== SIDEBAR - SEMI-TRANSPARENTE PARA VER PART√çCULAS ===== */
#sidebar {
    background: rgba(30, 30, 30, 0.6);
    border-right: 2px solid rgba(20, 20, 20, 0.5);
}

#navFrame {
    background: transparent;
    border: none;
}

QPushButton[navButton] {
    background: transparent;
    color: #b0b0b0;
    border: none;
    border-radius: 4px;
    padding: 8px 12px;
    margin: 1px 4px;
    font-size: 11px;
    font-weight: 500;
    text-align: left;
}

QPushButton[navButton]:hover {
    background: rgba(255, 255, 255, 0.08);
    color: #ffffff;
}

QPushButton[navButton][active="true"] {
    background: rgba(74, 144, 226, 0.15);
    color: #4a90e2;
    border-left: 2px solid #4a90e2;
    font-weight: 600;
}

#footerFrame {
    background: rgba(30, 30, 30, 0.6);
    border-top: 2px solid rgba(20, 20, 20, 0.5);
}

#statusLabel {
    color: #50e3c2;
    background: transparent;
    font-size: 9px;
    font-weight: 600;
}

/* ===== DASHBOARD ===== */
#dashboard {
    background: transparent;
}

#contentFrame {
    background: transparent;
    border: none;
}

/* ===== PAINEL DE HARDWARE ===== */
#hardwarePanel {
    background: rgba(30, 30, 30, 0.9);
    border: 1px solid #2a2a2a;
    border-radius: 12px;
}

/* ===== PAINEL DE HARDWARE (PILL) ===== */
#pillHardwarePanel {
    background: rgba(30, 30, 30, 0.9);
    border: 1px solid #2a2a2a;
    border-radius: 30px;
}

#hardwareStat {
    background: transparent;
    border: none;
}

#hardwareTitle {
    color: #b0b0b0;
    background: transparent;
    font-size: 10px;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

#hardwareValue {
    background: transparent;
    font-size: 16px;
    font-weight: bold;
}

/* ===== PAINEL DE A√á√ïES ===== */
#actionPanel {
    background: transparent;
    border: none;
}

#buttonContainer {
    background: rgba(30, 30, 30, 0.6);
    border: 1px solid #2a2a2a;
    border-radius: 12px;
}

#sectionTitle {
    color: #ffffff;
    background: transparent;
    font-size: 16px;
    font-weight: bold;
}

/* BOT√ÉO PRINCIPAL */
#mainSpoofButton {
    background: qlineargradient(x1:0, y1:0, x2:1, y2:0, stop:0 #4a90e2, stop:1 #50e3c2);
    color: #000000;
    border: none;
    border-radius: 8px;
    font-size: 13px;
    font-weight: bold;
    padding: 14px 28px;
    letter-spacing: 0.5px;
    text-transform: uppercase;
}

#mainSpoofButton:hover {
    background: qlineargradient(x1:0, y1:0, x2:1, y2:0, stop:0 #5a9fee, stop:1 #60f3d2);
}

#mainSpoofButton:pressed {
    background: qlineargradient(x1:0, y1:0, x2:1, y2:0, stop:0 #3a80d2, stop:1 #40d3b2);
}

#mainSpoofButton:disabled {
    background: #2a2a2a;
    color: #666666;
}

#spoofStatus {
    color: #b0b0b0;
    background: transparent;
    font-size: 11px;
    padding: 8px;
}

/* ===== M√ìDULOS ===== */
#modulesPanel {
    background: rgba(30, 30, 30, 0.6);
    border: 1px solid #2a2a2a;
    border-radius: 12px;
}

#modulesTitle {
    color: #ffffff;
    background: transparent;
    font-size: 12px;
    font-weight: bold;
    text-transform: uppercase;
    letter-spacing: 1px;
}

QFrame[switchRow] {
    background: transparent;
    border: none;
    border-radius: 4px;
}

QFrame[switchRow]:hover {
    background: rgba(255, 255, 255, 0.05);
}

#moduleName {
    color: #e0e0e0;
    background: transparent;
    font-size: 11px;
    font-weight: 500;
}

/* ===== SWITCH BUTTON ===== */
SwitchButton {
    background-color: #333333;
    border: 2px solid #444444;
    border-radius: 10px;
}

SwitchButton:hover {
    background-color: #3a3a3a;
    border: 2px solid #4a4a4a;
}

SwitchButton:checked {
    background-color: #4a90e2;
    border: 2px solid #4a90e2;
}

SwitchButton:checked:hover {
    background-color: #5a9fee;
    border: 2px solid #5a9fee;
}

SwitchButton::handle {
    background-color: #ffffff;
    border: none;
    border-radius: 8px;
}

/* ===== BARRA DE STATUS ===== */
QStatusBar {
    background: #1a1a1a;
    color: #b0b0b0;
    border-top: 1px solid #2a2a2a;
    padding: 6px 15px;
    font-size: 10px;
}

/* ===== SCROLLBARS ===== */
QScrollBar:vertical {
    background: #252525;
    width: 8px;
    margin: 0px;
    border-radius: 4px;
}

QScrollBar::handle:vertical {
    background: #333333;
    border-radius: 4px;
    min-height: 20px;
}

QScrollBar::handle:vertical:hover {
    background: #444444;
}

/* Sistema de part√≠culas */
ParticleSystem {
    background: transparent;
    border: none;
}


# src\ui\styles\components\buttons.css

/* TODO: Add styles */


# src\ui\styles\components\cards.css

/* TODO: Add styles */


# src\ui\styles\components\logs.css

/* TODO: Add styles */


# src\ui\styles\components\progress.css

/* TODO: Add styles */


# src\ui\styles\components\sidebar.css

/* TODO: Add styles */


# src\ui\styles\components\tabs.css

/* TODO: Add styles */


# src\ui\styles\themes\cyan.css

/* TODO: Add styles */


# src\ui\styles\themes\dark.css

/* TODO: Add styles */


# src\ui\styles\themes\purple.css

/* TODO: Add styles */


# src\utils\admin_check.py

# TODO: Implement


# src\utils\hardware_reader.py

# src/utils/hardware_reader.py

import psutil
import traceback
import time # NEW IMPORT

class HardwareReader:
    def __init__(self):
        """Inicializa o leitor de hardware."""
        # Inicializar o psutil para a CPU
        psutil.cpu_percent(interval=None)

        # NEW: Inicializar contadores de Disco
        # Pegar os contadores totais (sem ser por parti√ß√£o)
        self.last_disk_io = psutil.disk_io_counters(perdisk=False)
        self.last_disk_time = time.time()

    def get_cpu_percent(self):
        """Retorna o uso atual da CPU em %."""
        try:
            return psutil.cpu_percent(interval=None)
        except Exception:
            return 0.0

    def get_memory_percent(self):
        """Retorna o uso atual da mem√≥ria em %."""
        try:
            memory = psutil.virtual_memory()
            return memory.percent
        except Exception:
            return 0.0

    def get_disk_mbs(self): # CHANGED: Name and logic
        """Retorna a atividade de R/W do disco em MB/s."""
        try:
            current_disk_io = psutil.disk_io_counters(perdisk=False)
            current_disk_time = time.time()

            # Delta de tempo (em segundos)
            time_delta = current_disk_time - self.last_disk_time
            if time_delta == 0:
                # Evita divis√£o por zero se chamado r√°pido demais
                return 0.0

            # Calcular bytes lidos/escritos no intervalo
            read_delta = current_disk_io.read_bytes - self.last_disk_io.read_bytes
            write_delta = current_disk_io.write_bytes - self.last_disk_io.write_bytes
            total_bytes_delta = read_delta + write_delta

            # Calcular MB/s
            bytes_per_second = total_bytes_delta / time_delta
            mb_per_second = bytes_per_second / (1024 * 1024) # 1 MB = 1024*1024 Bytes

            # Atualizar "last" para o pr√≥ximo c√°lculo
            self.last_disk_io = current_disk_io
            self.last_disk_time = current_disk_time

            return mb_per_second

        except Exception as e:
            print(f"Erro ao ler atividade do disco (MB/s): {e}")
            return 0.0


# src\utils\icon_manager.py

# TODO: Implement


# src\utils\logger.py

# TODO: Implement


# src\utils\registry_checker.py

# TODO: Implement


# tests\test_auth.py

# TODO: Implement


# tests\test_spoofers.py

# TODO: Implement


# tests\test_ui.py

# TODO: Implement


